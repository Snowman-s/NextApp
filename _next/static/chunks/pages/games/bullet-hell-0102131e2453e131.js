(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{4258:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/bullet-hell",function(){return r(4219)}])},4219:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var s=r(5893),l=r(1120),n=r(5154),a=r(3619),o=r(9144),i=r(1401),u=r(5214),c=r(3265),p=r(9894),d=r(1702),f=r(5152),h=r.n(f),y=r(9008),x=r.n(y),m=r(7294);function k(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=!1,l=-1,n=-1,a=60*r,o=60*r,i=!1;function u(){e.bullets=[],e.player={x:200,y:500},e.frameCount=0,t={u:!1,d:!1,l:!1,r:!1,z:!1,capture:void 0!=t&&t.capture,e:!1},s=!1,l=-1,i=!1,o=a}e.bullets=[],e.setup=function(){e.createCanvas(600,600),e.rectMode(e.CENTER),u()},e.draw=()=>{var r,a;let p;e.background(0),s||-1==o||e.shoot(),n>-1&&n--,-1==n&&t.z&&(i=!0,n=60),r={x:0,y:0},t.u&&(r.y-=1),t.l&&(r.x-=1),t.r&&(r.x+=1),t.d&&(r.y+=1),0!=r.x&&0!=r.y&&(r.x/=e.sqrt(2),r.y/=e.sqrt(2)),p=5*(n>50?2:1),r.x*=p,r.y*=p,e.player.x+=r.x,e.player.y+=r.y,e.player.x=e.max(e.player.x,4.5),e.player.y=e.max(e.player.y,4.5),e.player.x=e.min(e.player.x,395.5),e.player.y=e.min(e.player.y,e.height-4.5),function(){let t=[];c.filter(t=>e.frameCount-t.countStartframe>t.spaceFrame).forEach(e=>{e.bullets=e.bullets.filter(e=>!e.deleted),e.bullets.forEach(t=>e.func(t)),e.countStartframe+=e.spaceFrame,e.onlyOnce&&t.push(e)}),c=c.filter(e=>0!=e.bullets.length&&-1===t.indexOf(e))}(),e.bullets.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY}),!s&&(n>50||e.bullets.forEach(t=>{2*e.dist(e.player.x,e.player.y,t.x,t.y)<9+t.size&&(s=!0,l=0)})),e.bullets=e.bullets.filter(t=>{let r=-100<t.x&&t.x<500&&-100<t.y&&t.y<e.height+100;return t.deleted=!r,r}),o>=0&&o--,-1==o&&(e.bullets=[]),!s&&(n<0||(e.push(),e.stroke(0,255,255),e.noFill(),e.arc(e.player.x,e.player.y,27,27,-e.PI/2,-e.PI/2+n/60*e.TAU),e.pop())),s||(e.push(),e.noStroke(),n>50?e.fill(255,255,0):e.fill(0,255,255),e.square(e.player.x,e.player.y,9),e.pop()),e.push(),e.bullets.forEach(t=>{e.noStroke(),e.square(t.x,t.y,t.size)}),e.pop(),e.push(),e.fill(255),e.textSize(50),a=e.max(e.int(o/60),0),e.text(e.str(a),320,50),e.pop(),(s||-1==o)&&(l++,e.background(0,l/50*255),s||(e.push(),e.textSize(50),e.fill(255),e.text((i?"":"☆")+"Clear!",0,e.height/2),e.pop()),l>=70&&(s?u():(e.push(),e.textSize(30),e.fill(255),e.text("Press Enter Key to restart.",0,e.height/2+30),e.pop(),t.e&&u()))),e.push(),e.rectMode(e.CORNER),e.stroke(255),e.fill(0),e.rect(400,0,e.width-400,e.height),e.fill(255),e.textSize(30),e.text("How To Play",400,30),e.textSize(15),e.text("↑↓→← : Move",400,60),e.text("z : Dash",400,90),e.text("Ctl : Capture Game Screen",400,120),e.pop(),t.capture&&(e.save("screen-shot.jpg"),t.capture=!1)},e.remainSeconds=()=>e.int(o/60),e.spentSeconds=()=>e.int((a-o)/60),e.shoot=()=>{if(e.frameCount%30==0)for(let t=0;t<e.TAU;t+=e.PI/5)e.bullets.push({x:200,y:200,speedX:9*e.cos(t),speedY:9*e.sin(t),deleted:!1,size:10})},e.keyPressed=()=>{switch(e.keyCode){case e.UP_ARROW:t.u=!0;break;case e.DOWN_ARROW:t.d=!0;break;case e.LEFT_ARROW:t.l=!0;break;case e.RIGHT_ARROW:t.r=!0;break;case e.ENTER:t.e=!0;break;case e.CONTROL:t.capture=!0}"z"===e.key&&(t.z=!0)},e.keyReleased=()=>{switch(e.keyCode){case e.UP_ARROW:t.u=!1;break;case e.DOWN_ARROW:t.d=!1;break;case e.LEFT_ARROW:t.l=!1;break;case e.RIGHT_ARROW:t.r=!1;break;case e.ENTER:t.e=!1;break;case e.CONTROL:t.capture=!1}"z"===e.key&&(t.z=!1)},e.nWay=(t,r,s,l,n,a,o)=>{var i=[];for(let u=0;u<n;u++){var c=a+o*(u-(n-1)/2);i.push({x:t,y:r,size:s,speedX:l*e.cos(c),speedY:l*e.sin(c),deleted:!1})}return e.bullets.push(...i),i},e.allWay=function(t,r,s,l,n,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;var i=[];for(let u=0;u<n;u++){var c=a+u*(e.TAU/n),p=e.cos(c),d=e.sin(c);i.push({x:t+o*p,y:r+o*d,size:s,speedX:l*p,speedY:l*d,deleted:!1})}return e.bullets.push(...i),i},e.freq=(t,r)=>{e.frameCount%t==0&&r()};let c=[];e.registerRoutine=function(t,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];c.push({bullets:t,spaceFrame:s,countStartframe:e.frameCount,onlyOnce:l,func:r})}}function b(e){k(e,15),e.shoot=()=>{let t=e.frameCount;e.allWay(200,200,10,10,10,e.sin(t/60)/2),10>e.remainSeconds()&&e.freq(3,()=>e.nWay(200,200,8,5,10,t/5,.03))}}function R(e){k(e,15),e.shoot=()=>{let t=e.spentSeconds();e.freq(30,()=>{let r=100+e.random(200),s=100+e.random(100),l=e.random(e.TAU);for(let n=2.5;n<2.5+t/2;n+=.5)e.allWay(r,s,10,n,10,l)})}}function C(e){k(e,15),e.shoot=()=>{e.freq(30,()=>{let t=1.7*e.frameCount;for(let r=t;r<e.TAU+t;r+=e.PI/(1+2.5*e.spentSeconds())){let s=(1.1+e.cos(2*r+e.frameCount/57))*4;e.bullets.push({x:200,y:100,speedX:s*e.cos(r),speedY:s*e.sin(r),deleted:!1,size:20})}})}}function v(e){k(e,16),e.shoot=()=>{e.freq(5,()=>{e.allWay(200,300,20,3,30,e.frameCount,(15-e.frameCount/60)*20+150)}),e.freq(70,()=>e.allWay(e.player.x,e.player.y,10,-5,2*e.int(e.spentSeconds()/7)+2,e.random(e.TAU),200))}}function g(e){k(e,15),e.shoot=()=>{e.freq(30,()=>{e.registerRoutine(e.allWay(200,200,10,2,e.int(1.2*e.spentSeconds()+3),0),t=>{t.speedX+=(e.player.x-200)/3e3,t.speedY+=(e.player.y-200)/3e3})})}}function z(e){k(e,15),e.shoot=()=>{e.freq(6>e.remainSeconds()?3:7,()=>{let t=[];for(let r=0;r<400;r+=99){let s=(2*e.frameCount+r)%400,l=s/30+r,n={x:s,y:r+50*e.cos(l),speedX:e.cos(l)/2,speedY:e.sin(l)/2,deleted:!1,size:10};t.push(n),e.bullets.push(n)}e.registerRoutine(t,e=>{e.speedX*=5,e.speedY*=5},40,!0)})}}function E(){var e=new Map;let t=function(t,r,s){e.set(t,{work:r,name:void 0==s?t:s})};return t("a",b,"斥力"),t("b",R,"花火の打ち上げ"),t("c",C,"押し寄せる双葉"),t("d",v,"一人相撲"),t("e",g,"銀河系"),t("f",z,"死霊の散歩"),e}let S=h()(()=>r.e(408).then(r.bind(r,6408)),{loadableGenerated:{webpack:()=>[6408]},ssr:!1}),_=(0,l.Z)(e=>(0,n.Z)({root:{"& h1":{padding:e.spacing(3),color:e.palette.primary.dark}}})),O=function(){let e=[],t=E().keys();if(E().size>0)for(let r=t.next();!r.done;r=t.next()){var s=E().get(r.value);e.push({id:r.value,sketchName:s.name,sketchFunc:s.work})}return e}();function T(){let e=_(),[t,r]=(0,m.useState)(O[0]);return(0,s.jsxs)("div",{className:e.root,children:[(0,s.jsxs)(x(),{children:[(0,s.jsx)("title",{children:"BulletHell"}),(0,s.jsx)("meta",{name:"description",content:"弾幕シューティングをしよう"}),(0,s.jsx)("link",{rel:"icon",href:"/NextApp/favicon.ico"})]}),(0,s.jsxs)(o.Z,{direction:{xs:"column",sm:"row"},children:[(0,s.jsx)(i.Z,{children:(0,s.jsx)(u.Z,{children:O.map(e=>(0,s.jsxs)(c.ZP,{onClick(t){t.preventDefault(),r(e)},button:!0,children:[e===t?(0,s.jsx)(p.Z,{children:(0,s.jsx)(a.Z,{})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(d.Z,{inset:e!==t,primary:e.sketchName})]},e.id))})}),(0,s.jsx)(S,{sketch:t.sketchFunc})]})]})}}},function(e){e.O(0,[158,768,102,774,888,179],function(){return e(e.s=4258)}),_N_E=e.O()}]);