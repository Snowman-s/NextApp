(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{3323:function(n,r,e){"use strict";e.r(r),e.d(r,{default:function(){return an}});var t=e(5893),a=e(5731),i=e(9008),o=e(1749),c=e(9659),u=e(282),s=e(9895),f=e(7812),d=e(7294),l=e(460),m=e(5660),h=e.n(m),v=e(9863),p=e(2809),b=e(1077),w=e(8847),x=e(2953),g=e(9092),k=e(8216),y=e(5997);function j(n){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,t=(0,x.Z)(n);if(r){var a=(0,x.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,w.Z)(this,e)}}function C(n,r){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,r){if(!n)return;if("string"===typeof n)return Z(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Z(n,r)}(n))||r&&n&&"number"===typeof n.length){e&&(n=e);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return o=n.done,n},e:function(n){c=!0,i=n},f:function(){try{o||null==e.return||e.return()}finally{if(c)throw i}}}}function Z(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var I="Push",S="Dup",E="Copy",A="Swap",F="Discard",R="Slide",N="Add",O="Subtract",P="Multiply",_="Divide",D="Modulo",M="Store",L="Retrieve",T="Label",J="Call",H="Jump",U="JumpIfZero",W="JumpIfNegative",X="Return",$="End",z="OutputCharacter",V="OutputNumber",q="ReadCharacter",B="ReadNumber",G=[I,E,R];var K=[T,J,H,W,U];function Q(n){return void 0!=K.find((function(r){return r==n}))}var Y=function(){function n(){(0,k.Z)(this,n)}return(0,y.Z)(n,[{key:"parse",value:function(n,r,e,t){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.lexical(n,[r,e,t],a);if(!a){var o=i.map((function(n,r){return{error:{msg:'"'.concat(n.where,'" is invalid token'),tokenIndex:r},token:n}})).filter((function(n){return n.token.error})).map((function(n){return n.error}));if(o.length>0)return o}var c=i.map((function(n){return n.where})),u=this.transcript(c,r,e,t),s=this.syntactic(u);return s}},{key:"lexical",value:function(n,r){var e,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[],i="",o="",c=function(n){t&&n.error||a.push(n)},u=C(n);try{n:for(u.s();!(e=u.n()).done;){var s=e.value;if(s.match(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g))""!=(o+=i)&&c({error:!0,where:o}),o=i="";else{var f=i;i+=s;var d,l=C(r);try{for(l.s();!(d=l.n()).done;){var m=d.value;if(m==i){""!=o&&c({error:!0,where:o}),o="",c({error:!1,where:i}),i="";continue n}if(i==m.slice(0,i.length))continue n}}catch(b){l.e(b)}finally{l.f()}var h,v=C(r);try{for(v.s();!(h=v.n()).done;){var p=h.value;if(p[0]==s){o+=f,i=s;continue n}}}catch(b){v.e(b)}finally{v.f()}o+=i,i=""}}}catch(b){u.e(b)}finally{u.f()}return""!=(o+=i)&&c({error:!0,where:o}),a}},{key:"transcript",value:function(n,r,e,t){return n.map((function(n){switch(n){case r:return"ws";case e:return"tab";case t:return"lf";default:throw new Error}}))}},{key:"syntactic",value:function(n){var r=function(){var r=n.shift();if(void 0==r)throw new nn;return r},e=[],t=[],a=[];try{for(;n.length>0;){var i=this.findIMP(r),o=void 0;switch(i){case"Stack":o=this.findStackCommand(r);break;case"Arith":o=this.findArithCommand(r);break;case"Flow":o=this.findFlowCommand(r);break;case"Heap":o=this.findHeapCommand(r);break;case"IO":o=this.findIOCommand(r);break;default:}"msg"in o?(e.push(void 0),a.push(Object.assign(o,{commandIndex:e.length-1}))):(e.push(o),"Label"==o.command&&t.push({label:o.param,commandIndex:e.length-1}))}}catch(u){if(u instanceof nn)return{error:[{msg:"Unexpected EOF",commandIndex:e.length}],out:e}}var c=[];return t.forEach((function(n){-1!=c.indexOf(n.label)?a.push({msg:'Label "'.concat(n.label,'" is already exsist.'),commandIndex:n.commandIndex}):c.push(n.label)})),e.forEach((function(n,r){if(void 0!=n){(function(n){return Q(n.command)})(n)&&-1==t.map((function(n){return n.label})).findIndex((function(r){return r==n.param}))&&a.push({msg:'Label "'.concat(n.param,'" is not defined'),commandIndex:r})}})),a.length>0?{error:a.sort((function(n,r){return n.commandIndex-r.commandIndex})),out:e}:{commands:e,labels:t}}},{key:"findIMP",value:function(n){var r=n();if("ws"==r)return"Stack";if("tab"==r){var e=n();return"ws"==e?"Arith":"tab"==e?"Heap":"IO"}return"Flow"}},{key:"findStackCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws"],cmd:I},{t:["lf","ws"],cmd:S},{t:["tab","ws"],cmd:E},{t:["lf","tab"],cmd:A},{t:["lf","lf"],cmd:F},{t:["tab","lf"],cmd:R}])}},{key:"findArithCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws","ws"],cmd:N},{t:["ws","tab"],cmd:O},{t:["ws","lf"],cmd:P},{t:["tab","ws"],cmd:_},{t:["tab","tab"],cmd:D}])}},{key:"findHeapCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws"],cmd:M},{t:["tab"],cmd:L}])}},{key:"findFlowCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws","ws"],cmd:T},{t:["ws","tab"],cmd:J},{t:["ws","lf"],cmd:H},{t:["tab","ws"],cmd:U},{t:["tab","tab"],cmd:W},{t:["tab","lf"],cmd:X},{t:["lf","lf"],cmd:$}])}},{key:"findIOCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws","ws"],cmd:z},{t:["ws","tab"],cmd:V},{t:["tab","ws"],cmd:q},{t:["tab","tab"],cmd:B}])}},{key:"findCommandAndParam",value:function(n,r){var e,t=this.findCommand(n,r);if(t instanceof rn)return t;if(e=t,void 0!=G.find((function(n){return n==e}))){var a=this.findNumber(n);return a instanceof rn?a:{command:t,param:a}}if(Q(t)){var i=this.findLabel(n);return i instanceof rn?i:{command:t,param:i}}return{command:t}}},{key:"findCommand",value:function(n,r){var e=[];e.push(n());for(var t=function(){return r.find((function(n){var r=n.t;return void 0==e.find((function(n,e){return r[e]!=n}))}))},a=t(),i=function(){return r.find((function(n){var r=n.t;return r.length==e.length&&void 0==r.find((function(n,r){return e[r]!=n}))}))},o=i();void 0==o&&void 0!=a;)e.push(n()),a=t(),o=i();return void 0==o?en("There are no commands match to this pattern"):o.cmd}},{key:"findNumber",value:function(n){var r=n();if("lf"==r)return en("Unexpected end of number");var e="ws"==r?1:-1;if("lf"==(r=n()))return en("Unexpected end of number");var t=[];for(t.push("ws"==r?0:1);"lf"!=(r=n());)t.push("ws"==r?0:1);return e*t.map((function(n,r){return n<<t.length-1-r})).reduce((function(n,r){return n+r}))}},{key:"findLabel",value:function(n){var r=n(),e="";if("lf"==r)return en("Unexpected end of label");for(e+="ws"==r?"W":"tab"==r?"T":"L";"lf"!=(r=n());)e+="ws"==r?"W":"tab"==r?"T":"L";return e}}]),n}(),nn=function(n){(0,b.Z)(e,n);var r=j(e);function e(){return(0,k.Z)(this,e),r.call(this)}return e}((0,g.Z)(Error)),rn=function n(r){(0,k.Z)(this,n),(0,p.Z)(this,"msg",void 0),this.msg=r};function en(n){return new rn(n)}var tn=function(){function n(){(0,k.Z)(this,n)}return(0,y.Z)(n,[{key:"exec",value:function(n,r){var e,t=n.commands,a=n.labels,i=0,o=[],c=function(n){l(n),o.push(n)},u=function(){if(0==o.length)throw new Error("Attempt to pop from empty stack");return o.pop()},s=function(n){if(o.length<=n)throw new Error("Index ".concat(n," element is not exsist on stack"));return o[n]},f=function(n){if(o.length<=n)throw new Error("Index ".concat(n," element is not exsist on stack"));return o.splice(n,1)},d=new Map,l=function(n){if(!Number.isSafeInteger(n))throw new Error("Integer overflowed")},m=function(n,r){return d.set(n,r)},h=[],v=function(){if(0==h.length)throw new Error("Attempt to end a subroutine in non-subrotine");return h.pop()};try{for(;t.length>i;){var p=t[i];switch(console.log(p.command),p.command){case"Push":c(p.param),i++;break;case"Dup":var b=u();c(b),c(b),i++;break;case"Copy":c(s(p.param)),i++;break;case"Swap":var w=u(),x=u();c(w),c(x),i++;break;case"Discard":u(),i++;break;case"Slide":f(p.param),i++;break;case"Add":c(u()+u()),i++;break;case"Subtract":var g=u();c(u()-g),i++;break;case"Multiply":c(u()*u()),i++;break;case"Divide":var k=u(),y=u();c(Math.trunc(y/k)),i++;break;case"Modulo":var j=u();c(u()%j),i++;break;case"Store":var C=u();m(u(),C),i++;break;case"Retrieve":var Z=u();c((l(e=Z),d.has(e)?d[e]:0)),i++;break;case"Label":i++;break;case"Call":!function(){var n;n=i+1,h.push(n);var r=p.param,e=a.find((function(n){return n.label==r})).commandIndex;if(void 0==e)throw new Error("Cannot find label ".concat(r));i=e}();break;case"Jump":!function(){var n=p.param,r=a.find((function(r){return r.label==n})).commandIndex;if(void 0==r)throw new Error("Cannot find label ".concat(n));i=r}();break;case"JumpIfZero":0==u()?function(){var n=p.param,r=a.find((function(r){return r.label==n})).commandIndex;if(void 0==r)throw new Error("Cannot find label ".concat(n));i=r}():i++;break;case"JumpIfNegative":u()<0?function(){var n=p.param,r=a.find((function(r){return r.label==n})).commandIndex;if(void 0==r)throw new Error("Cannot find label ".concat(n));i=r}():i++;break;case"Return":i=v();break;case"End":return;case"OutputCharacter":r(String.fromCodePoint(u())),i++;break;case"OutputNumber":r(u().toString()),i++;break;case"ReadCharacter":case"ReadNumber":i++;break;default:}}}catch(I){I instanceof Error&&r("Error at index".concat(i," command: ").concat(I.message))}}}]),n}();function an(){var n=d.useState("\u30ab\u30e9\u30c7\u30b7\u30e5!\n\u3059\u3054\u3044!\n\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060!"),r=(0,a.Z)(n,2),e=r[0],m=r[1],p=d.useState(),b=(0,a.Z)(p,2),w=b[0],x=b[1],g=d.useState(),k=(0,a.Z)(g,2),y=k[0],j=k[1],C=d.useState(),Z=(0,a.Z)(C,2),I=Z[0],S=Z[1];h().languages.kaladesh={ws:/\u3059\u3054\u3044\!/,tab:/\u30ab\u30e9\u30c7\u30b7\u30e5\!/,lf:/\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060\!/};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.default,{children:[(0,t.jsx)("title",{children:"\u30ab\u30e9\u30c7\u30b7\u30e5\u8a00\u8a9e\u30a8\u30c7\u30a3\u30bf\u30fc"}),(0,t.jsx)("meta",{name:"description",content:"\u30ab\u30e9\u30c7\u30b7\u30e5\u8a00\u8a9e\u3059\u3054\u3044!\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060!"}),(0,t.jsx)("link",{rel:"icon",href:"/NextApp/favicon.ico"}),(0,t.jsx)("style",{children:"\n      .token.ws {\n        color: cornflowerblue;\n      }\n      .token.tab {\n        color: #DD4A68;\n      }\n      .token.lf {\n        color: coral;\n      }\n    "})]}),(0,t.jsxs)(o.Z,{container:!0,alignItems:"center",spacing:2,children:[(0,t.jsx)(o.Z,{item:!0,children:(0,t.jsx)("h1",{children:"\u30ab\u30e9\u30c7\u30b7\u30e5\u8a00\u8a9e\u30a8\u30c7\u30a3\u30bf\u30fc"})}),(0,t.jsx)(o.Z,{item:!0,children:(0,t.jsx)(c.Z,{href:"./help",children:(0,t.jsx)(u.Z,{variant:"contained",children:"Help (\u5185\u5bb9\u306f\u4fdd\u5b58\u3055\u308c\u307e\u305b\u3093!)"})})})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)(o.Z,{container:!0,children:[(0,t.jsx)(o.Z,{item:!0,children:(0,t.jsxs)(s.Z,{children:[(0,t.jsx)("h3",{children:"\u30b3\u30fc\u30c9"}),(0,t.jsx)("hr",{style:{marginRight:"15px"}}),(0,t.jsx)(l.Z,{value:e,onValueChange:function(n){return m(n)},highlight:function(n){return h().highlight(n,h().languages.kaladesh,"kaladesh")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,fontWeight:"bold"}})]})}),(0,t.jsx)(o.Z,{item:!0,children:(0,t.jsx)(f.Z,{onClick:function(){var n=(new Y).parse(e,"\u3059\u3054\u3044!","\u30ab\u30e9\u30c7\u30b7\u30e5!","\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060!",!0);x(n),j(void 0==n?"":function(n){if("commands"in n)return n.commands.map((function(n){return"  ".concat(n.command," ").concat("param"in n?n.param.toString():"","\n")})).reduce((function(n,r){return n+r}),"");if("error"in n){var r=n.error.map((function(n){return"Syntax Error: ".concat(n.msg,", Command Index=").concat(n.commandIndex,"\n")})).reduce((function(n,r){return n+r}),"");return n.out.length>0&&(r+="\n\u30fbCommands to refer\n",r+=n.out.map((function(n,r){return r.toString()+": "+(void 0==n?"???\n":"".concat(n.command," ").concat("param"in n?n.param.toString():"","\n"))})).reduce((function(n,r){return n+r}),"")),r}return n.map((function(n){return"Syntax Error:".concat(n.msg," Token Index=").concat(n.tokenIndex,"\n")})).reduce((function(n,r){return n+r}),"")}(n))},children:(0,t.jsx)(v.Z,{})})}),void 0==y?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{item:!0,children:(0,t.jsxs)(s.Z,{style:{whiteSpace:"pre"},children:[(0,t.jsx)("h3",{children:"\u30b3\u30f3\u30d1\u30a4\u30eb\u7d50\u679c"}),(0,t.jsx)("hr",{style:{marginRight:"15px"}}),y]})}),(0,t.jsx)(o.Z,{item:!0,children:(0,t.jsx)(f.Z,{onClick:function(){if(void 0==w||Array.isArray(w)||"error"in w)S("");else{var n=new tn,r="";n.exec(w,(function(n){return r+=n})),S(r)}},children:(0,t.jsx)(v.Z,{})})}),void 0==I?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Z,{item:!0,children:(0,t.jsxs)(s.Z,{style:{whiteSpace:"pre"},children:[(0,t.jsx)("h3",{children:"\u5b9f\u884c\u7d50\u679c"}),(0,t.jsx)("hr",{style:{marginRight:"15px"}}),I]})})})]})]})]})}},4414:function(n,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/utils/kaladesh-lang",function(){return e(3323)}])}},function(n){n.O(0,[161,67,71,774,888,179],(function(){return r=4414,n(n.s=r);var r}));var r=n.O();_N_E=r}]);