(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{3323:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return an}});var t=r(5893),a=r(5731),o=r(9008),i=r(1749),c=r(9659),u=r(282),f=r(9895),d=r(7812),s=r(7294),l=r(460),m=r(5660),h=r.n(m),v=r(9863),p=r(2809),b=r(1077),w=r(8847),k=r(2953),x=r(9092),y=r(8216),g=r(5997);function C(n){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,t=(0,k.Z)(n);if(e){var a=(0,k.Z)(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return(0,w.Z)(this,r)}}function Z(n,e){var r;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(r=function(n,e){if(!n)return;if("string"===typeof n)return I(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(n,e)}(n))||e&&n&&"number"===typeof n.length){r&&(n=r);var t=0,a=function(){};return{s:a,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){c=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function I(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}var S="Push",j="Dup",E="Copy",A="Swap",N="Discard",O="Slide",F="Add",P="Subtract",R="Multiply",_="Divide",D="Modulo",M="Store",L="Retrieve",T="Label",J="Call",H="Jump",U="JumpIfZero",W="JumpIfNegative",X="Return",$="End",z="OutputCharacter",V="OutputNumber",q="ReadCharacter",B="ReadNumber",G=[S,E,O];var K=[T,J,H,W,U];function Q(n){return void 0!=K.find((function(e){return e==n}))}var Y=function(){function n(){(0,y.Z)(this,n)}return(0,g.Z)(n,[{key:"parse",value:function(n,e,r,t){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.lexical(n,[e,r,t],a);if(!a){var i=o.map((function(n,e){return{error:{msg:'"'.concat(n.where,'" is invalid token'),tokenIndex:e},token:n}})).filter((function(n){return n.token.error})).map((function(n){return n.error}));if(i.length>0)return i}var c=o.map((function(n){return n.where})),u=this.transcript(c,e,r,t),f=this.syntactic(u);return f}},{key:"lexical",value:function(n,e){var r,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[],o="",i="",c=function(n){t&&n.error||a.push(n)},u=Z(n);try{n:for(u.s();!(r=u.n()).done;){var f=r.value;if(f.match(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g))""!=(i+=o)&&c({error:!0,where:i}),i=o="";else{var d=o;o+=f;var s,l=Z(e);try{for(l.s();!(s=l.n()).done;){var m=s.value;if(m==o){""!=i&&c({error:!0,where:i}),i="",c({error:!1,where:o}),o="";continue n}if(o==m.slice(0,o.length))continue n}}catch(b){l.e(b)}finally{l.f()}var h,v=Z(e);try{for(v.s();!(h=v.n()).done;){var p=h.value;if(p[0]==f){i+=d,o=f;continue n}}}catch(b){v.e(b)}finally{v.f()}i+=o,o=""}}}catch(b){u.e(b)}finally{u.f()}return""!=(i+=o)&&c({error:!0,where:i}),a}},{key:"transcript",value:function(n,e,r,t){return n.map((function(n){switch(n){case e:return"ws";case r:return"tab";case t:return"lf";default:throw new Error}}))}},{key:"syntactic",value:function(n){var e=function(){var e=n.shift();if(void 0==e)throw new nn;return e},r=[],t=[],a=[];try{for(;n.length>0;){var o=this.findIMP(e),i=void 0;switch(o){case"Stack":i=this.findStackCommand(e);break;case"Arith":i=this.findArithCommand(e);break;case"Flow":i=this.findFlowCommand(e);break;case"Heap":i=this.findHeapCommand(e);break;case"IO":i=this.findIOCommand(e);break;default:}"msg"in i?(r.push(void 0),a.push(Object.assign(i,{commandIndex:r.length-1}))):(r.push(i),"Label"==i.command&&t.push({label:i.param,commandIndex:r.length-1}))}}catch(u){if(u instanceof nn)return{error:[{msg:"Unexpected EOF",commandIndex:r.length}],out:r}}var c=[];return t.forEach((function(n){-1!=c.indexOf(n.label)?a.push({msg:'Label "'.concat(n.label,'" is already exsist.'),commandIndex:n.commandIndex}):c.push(n.label)})),r.forEach((function(n,e){if(void 0!=n){(function(n){return Q(n.command)})(n)&&-1==t.map((function(n){return n.label})).findIndex((function(e){return e==n.param}))&&a.push({msg:'Label "'.concat(n.param,'" is not defined'),commandIndex:e})}})),a.length>0?{error:a.sort((function(n,e){return n.commandIndex-e.commandIndex})),out:r}:{commands:r,labels:t}}},{key:"findIMP",value:function(n){var e=n();if("ws"==e)return"Stack";if("tab"==e){var r=n();return"ws"==r?"Arith":"tab"==r?"Heap":"IO"}return"Flow"}},{key:"findStackCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws"],cmd:S},{t:["lf","ws"],cmd:j},{t:["tab","ws"],cmd:E},{t:["lf","tab"],cmd:A},{t:["lf","lf"],cmd:N},{t:["tab","lf"],cmd:O}])}},{key:"findArithCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws","ws"],cmd:F},{t:["ws","tab"],cmd:P},{t:["ws","lf"],cmd:R},{t:["tab","ws"],cmd:_},{t:["tab","tab"],cmd:D}])}},{key:"findHeapCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws"],cmd:M},{t:["tab"],cmd:L}])}},{key:"findFlowCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws","ws"],cmd:T},{t:["ws","tab"],cmd:J},{t:["ws","lf"],cmd:H},{t:["tab","ws"],cmd:U},{t:["tab","tab"],cmd:W},{t:["tab","lf"],cmd:X},{t:["lf","lf"],cmd:$}])}},{key:"findIOCommand",value:function(n){return this.findCommandAndParam(n,[{t:["ws","ws"],cmd:z},{t:["ws","tab"],cmd:V},{t:["tab","ws"],cmd:q},{t:["tab","tab"],cmd:B}])}},{key:"findCommandAndParam",value:function(n,e){var r,t=this.findCommand(n,e);if(t instanceof en)return t;if(r=t,void 0!=G.find((function(n){return n==r}))){var a=this.findNumber(n);return a instanceof en?a:{command:t,param:a}}if(Q(t)){var o=this.findLabel(n);return o instanceof en?o:{command:t,param:o}}return{command:t}}},{key:"findCommand",value:function(n,e){var r=[];r.push(n());for(var t=function(){return e.find((function(n){var e=n.t;return void 0==r.find((function(n,r){return e[r]!=n}))}))},a=t(),o=function(){return e.find((function(n){var e=n.t;return e.length==r.length&&void 0==e.find((function(n,e){return r[e]!=n}))}))},i=o();void 0==i&&void 0!=a;)r.push(n()),a=t(),i=o();return void 0==i?rn("There are no commands match to this pattern."):i.cmd}},{key:"findNumber",value:function(n){var e=n();if("lf"==e)return rn("Unexpected end of number");var r="ws"==e?1:-1;if("lf"==(e=n()))return rn("Unexpected end of number");var t=[];for(t.push("ws"==e?0:1);"lf"!=(e=n());)t.push("ws"==e?0:1);return r*t.map((function(n,e){return n<<t.length-1-e})).reduce((function(n,e){return n+e}))}},{key:"findLabel",value:function(n){var e=n(),r="";if("lf"==e)return rn("Unexpected end of label");for(r+="ws"==e?"W":"tab"==e?"T":"L";"lf"!=(e=n());)r+="ws"==e?"W":"tab"==e?"T":"L";return r}}]),n}(),nn=function(n){(0,b.Z)(r,n);var e=C(r);function r(){return(0,y.Z)(this,r),e.call(this)}return r}((0,x.Z)(Error)),en=function n(e){(0,y.Z)(this,n),(0,p.Z)(this,"msg",void 0),this.msg=e};function rn(n){return new en(n)}var tn=function(){function n(){(0,y.Z)(this,n)}return(0,g.Z)(n,[{key:"exec",value:function(n,e){var r,t=n.commands,a=n.labels,o=0,i=[],c=function(n){l(n),i.push(n)},u=function(){if(0==i.length)throw new Error("Attempt to pop from empty stack");return i.pop()},f=function(n){if(i.length<=n)throw new Error("Index ".concat(n," element is not exsist on stack"));return i[n]},d=function(n){if(i.length<=n)throw new Error("Index ".concat(n," element is not exsist on stack"));return i.splice(n,1)},s=new Map,l=function(n){if(!Number.isSafeInteger(n))throw new Error("Integer overflowed")},m=function(n,e){return s.set(n,e)},h=[],v=function(){if(0==h.length)throw new Error("Attempt to end a subroutine in non-subrotine");return h.pop()};try{for(;t.length>o;){var p=t[o];switch(console.log(p.command),p.command){case"Push":c(p.param),o++;break;case"Dup":var b=u();c(b),c(b),o++;break;case"Copy":c(f(p.param)),o++;break;case"Swap":var w=u(),k=u();c(w),c(k),o++;break;case"Discard":u(),o++;break;case"Slide":d(p.param),o++;break;case"Add":c(u()+u()),o++;break;case"Subtract":var x=u();c(u()-x),o++;break;case"Multiply":c(u()*u()),o++;break;case"Divide":var y=u(),g=u();c(Math.trunc(g/y)),o++;break;case"Modulo":var C=u();c(u()%C),o++;break;case"Store":var Z=u();m(u(),Z),o++;break;case"Retrieve":var I=u();c((l(r=I),s.has(r)?s[r]:0)),o++;break;case"Label":o++;break;case"Call":!function(){var n;n=o+1,h.push(n);var e=p.param,r=a.find((function(n){return n.label==e})).commandIndex;if(void 0==r)throw new Error("Cannot find label ".concat(e));o=r}();break;case"Jump":!function(){var n=p.param,e=a.find((function(e){return e.label==n})).commandIndex;if(void 0==e)throw new Error("Cannot find label ".concat(n));o=e}();break;case"JumpIfZero":0==u()?function(){var n=p.param,e=a.find((function(e){return e.label==n})).commandIndex;if(void 0==e)throw new Error("Cannot find label ".concat(n));o=e}():o++;break;case"JumpIfNegative":u()<0?function(){var n=p.param,e=a.find((function(e){return e.label==n})).commandIndex;if(void 0==e)throw new Error("Cannot find label ".concat(n));o=e}():o++;break;case"Return":o=v();break;case"End":return;case"OutputCharacter":e(String.fromCodePoint(u())),o++;break;case"OutputNumber":e(u().toString()),o++;break;case"ReadCharacter":case"ReadNumber":o++;break;default:}}}catch(S){S instanceof Error&&e("Error at index".concat(o," command: ").concat(S.message))}}}]),n}();function an(){var n=s.useState("\u30ab\u30e9\u30c7\u30b7\u30e5!\n\u3059\u3054\u3044!\n\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060!"),e=(0,a.Z)(n,2),r=e[0],m=e[1],p=s.useState(),b=(0,a.Z)(p,2),w=b[0],k=b[1],x=s.useState(),y=(0,a.Z)(x,2),g=y[0],C=y[1],Z=s.useState(),I=(0,a.Z)(Z,2),S=I[0],j=I[1];h().languages.kaladesh={ws:/\u3059\u3054\u3044\!/,tab:/\u30ab\u30e9\u30c7\u30b7\u30e5\!/,lf:/\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060\!/};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(o.default,{children:[(0,t.jsx)("title",{children:"\u30ab\u30e9\u30c7\u30b7\u30e5\u8a00\u8a9e\u30a8\u30c7\u30a3\u30bf\u30fc"}),(0,t.jsx)("meta",{name:"description",content:"\u30ab\u30e9\u30c7\u30b7\u30e5\u8a00\u8a9e\u3059\u3054\u3044!\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060!"}),(0,t.jsx)("link",{rel:"icon",href:"/NextApp/favicon.ico"}),(0,t.jsx)("style",{children:"\n      .token.ws {\n        color: cornflowerblue;\n      }\n      .token.tab {\n        color: #DD4A68;\n      }\n      .token.lf {\n        color: coral;\n      }\n    "})]}),(0,t.jsxs)(i.Z,{container:!0,alignItems:"center",spacing:2,children:[(0,t.jsx)(i.Z,{item:!0,children:(0,t.jsx)("h1",{children:"\u30ab\u30e9\u30c7\u30b7\u30e5\u8a00\u8a9e\u30a8\u30c7\u30a3\u30bf\u30fc"})}),(0,t.jsx)(i.Z,{item:!0,children:(0,t.jsx)(c.Z,{href:"./help",children:(0,t.jsx)(u.Z,{variant:"contained",children:"Help (\u5185\u5bb9\u306f\u4fdd\u5b58\u3055\u308c\u307e\u305b\u3093!)"})})})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)(i.Z,{container:!0,children:[(0,t.jsx)(i.Z,{item:!0,children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(l.Z,{value:r,onValueChange:function(n){return m(n)},highlight:function(n){return h().highlight(n,h().languages.kaladesh,"kaladesh")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,fontWeight:"bold"}})})}),(0,t.jsx)(i.Z,{item:!0,children:(0,t.jsx)(d.Z,{onClick:function(){var n=(new Y).parse(r,"\u3059\u3054\u3044!","\u30ab\u30e9\u30c7\u30b7\u30e5!","\u672c\u5f53\u306b\u3059\u3054\u3044\u3093\u3060!",!0);k(n),C(void 0==n?"":function(n){if("commands"in n)return n.commands.map((function(n){return"  ".concat(n.command," ").concat("param"in n?n.param.toString():"","\n")})).reduce((function(n,e){return n+e}),"");if("error"in n){var e=n.error.map((function(n){return"Syntax Error: ".concat(n.msg," Command Index=").concat(n.commandIndex,"\n")})).reduce((function(n,e){return n+e}),"");return n.out.length>0&&(e+="\n\u30fbCommands to refer\n",e+=n.out.map((function(n,e){return e.toString()+": "+(void 0==n?"???\n":"".concat(n.command," ").concat("param"in n?n.param.toString():"","\n"))})).reduce((function(n,e){return n+e}),"")),e}return n.map((function(n){return"Syntax Error:".concat(n.msg," Token Index=").concat(n.tokenIndex,"\n")})).reduce((function(n,e){return n+e}),"")}(n))},children:(0,t.jsx)(v.Z,{})})}),(0,t.jsx)(i.Z,{item:!0,children:(0,t.jsx)(f.Z,{style:{whiteSpace:"pre"},children:g})}),(0,t.jsx)(i.Z,{item:!0,children:(0,t.jsx)(d.Z,{onClick:function(){if(void 0==w||Array.isArray(w)||"error"in w)j("");else{var n=new tn,e="";n.exec(w,(function(n){return e+=n})),j(e)}},children:(0,t.jsx)(v.Z,{})})}),(0,t.jsx)(i.Z,{item:!0,children:(0,t.jsx)(f.Z,{style:{whiteSpace:"pre"},children:S})})]})]})}},4414:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/utils/kaladesh-lang",function(){return r(3323)}])}},function(n){n.O(0,[161,67,71,774,888,179],(function(){return e=4414,n(n.s=e);var e}));var e=n.O();_N_E=e}]);