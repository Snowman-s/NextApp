(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479,408],{6851:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/noiseaction",function(){return s(2175)}])},7645:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){let s=r.default,h=(null==e?void 0:e.suspense)?{}:{loading(t){let{error:e,isLoading:s,pastDelay:i}=t;return null}};if(t instanceof Promise?h.loader=()=>t:"function"==typeof t?h.loader=t:"object"==typeof t&&(h=i({},h,t)),(h=i({},h,e)).suspense&&(delete h.ssr,delete h.loading),h.loadableGenerated&&delete(h=i({},h,h.loadableGenerated)).loadableGenerated,"boolean"==typeof h.ssr&&!h.suspense){if(!h.ssr)return delete h.ssr,n(s,h);delete h.ssr}return s(h)},e.noSSR=n;var i=s(6495).Z,h=s(2648).Z,r=(h(s(7294)),h(s(4588)));function n(t,e){return delete e.webpack,delete e.modules,t(e)}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},3644:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoadableContext=void 0;var i=(0,s(2648).Z)(s(7294));let h=i.default.createContext(null);e.LoadableContext=h},4588:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(6495).Z,h=(0,s(1598).Z)(s(7294)),r=s(3644);let n=[],o=[],l=!1;function a(t){let e=t(),s={loading:!0,loaded:null,error:null};return s.promise=e.then(t=>(s.loading=!1,s.loaded=t,t)).catch(t=>{throw s.loading=!1,s.error=t,t}),s}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:t,_opts:e}=this;t.loading&&("number"==typeof e.delay&&(0===e.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},e.delay)),"number"==typeof e.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},e.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(t=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(t){this._state=i({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},t),this._callbacks.forEach(t=>t())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(t){return this._callbacks.add(t),()=>{this._callbacks.delete(t)}}constructor(t,e){this._loadFn=t,this._opts=e,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(t){return function(t,e){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},e);s.suspense&&(s.lazy=h.default.lazy(s.loader));let n=null;function a(){if(!n){let e=new d(t,s);n={getCurrentValue:e.getCurrentValue.bind(e),subscribe:e.subscribe.bind(e),retry:e.retry.bind(e),promise:e.promise.bind(e)}}return n.promise()}if(!l){let u=s.webpack?s.webpack():s.modules;u&&o.push(t=>{for(let e of u)if(-1!==t.indexOf(e))return a()})}function c(){a();let t=h.default.useContext(r.LoadableContext);t&&Array.isArray(s.modules)&&s.modules.forEach(e=>{t(e)})}let g=s.suspense?function(t,e){return c(),h.default.createElement(s.lazy,i({},t,{ref:e}))}:function(t,e){c();let i=h.useSyncExternalStore(n.subscribe,n.getCurrentValue,n.getCurrentValue);return h.default.useImperativeHandle(e,()=>({retry:n.retry}),[]),h.default.useMemo(()=>{var e;return i.loading||i.error?h.default.createElement(s.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:n.retry}):i.loaded?h.default.createElement((e=i.loaded)&&e.__esModule?e.default:e,t):null},[t,i])};return g.preload=()=>a(),g.displayName="LoadableComponent",h.default.forwardRef(g)}(a,t)}function c(t,e){let s=[];for(;t.length;){let i=t.pop();s.push(i(e))}return Promise.all(s).then(()=>{if(t.length)return c(t,e)})}u.preloadAll=()=>new Promise((t,e)=>{c(n).then(t,e)}),u.preloadReady=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(e=>{let s=()=>(l=!0,e());c(o,t).then(s,s)})},window.__NEXT_PRELOADREADY=u.preloadReady,e.default=u},6408:function(t,e,s){"use strict";s.r(e);var i=s(5152),h=s.n(i);e.default=h()(()=>Promise.all([s.e(6),s.e(683)]).then(s.bind(s,2683)),{loadableGenerated:{webpack:()=>[2683]},ssr:!1})},6098:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});class i{update(t){if(t.mouseIsPressed){let e=t.mouseX,s=t.mouseY;this.isInBounds(e,s)&&(this.pressed=!0)}else{if(this.pressed){let i=t.mouseX,h=t.mouseY;this.isInBounds(i,h)&&this.onClick()}this.pressed=!1}}setOnClick(t){this.onClick=t}constructor(){this.pressed=!1}}},2232:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});class i{setGeometry(t,e,s,i){this.x=t,this.y=e,this.width=s,this.height=i}setStrokeColor(t){this.strokeColor=t}setFillColor(t){this.fillColor=t}setTextColor(t){this.textColor=t}setText(t){this.text=t}update(t){}draw(t){var e,s,i;let h=this.text.split("\n").map(t=>t.length).reduce((e,s)=>t.max(e,s)),r=t.min(this.width/h,this.height);t.push(),t.fill(null!==(e=this.fillColor)&&void 0!==e?e:t.color(0)),t.stroke(null!==(s=this.strokeColor)&&void 0!==s?s:t.color(0)),t.rect(this.x,this.y,this.width,this.height),t.noStroke(),t.fill(null!==(i=this.textColor)&&void 0!==i?i:t.color(0)),t.textSize(r),t.textAlign(t.CENTER),t.text(this.text,this.x,this.y,this.width,this.height),t.pop()}constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.text="",this.fillColor=null,this.strokeColor=null,this.textColor=null}}},2175:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return C}});var i=s(5893),h=s(9008),r=s.n(h),n=s(6408);class o{static getInstance(){return this.instance}init(t){t.keyPressed=()=>{this.keys.add(t.key),this.keys.add(t.keyCode)},t.keyReleased=()=>{this.keys.delete(t.key),this.keys.delete(t.keyCode)},this.leftKey="a",this.rightKey="d",this.upKey="w"}isThatKeyPressing(t){let e=!1;return this.keys.forEach(s=>{e||(e=s==t)}),e}isLeftInputExists(){return this.isThatKeyPressing(this.leftKey)}isRightInputExists(){return this.isThatKeyPressing(this.rightKey)}isUpInputExists(){return this.isThatKeyPressing(this.upKey)}constructor(){this.keys=new Set}}o.instance=new o;class l{static getInstance(){return this.instance}update(t){this.loadedScenes.forEach(e=>{e.update(t)}),this.reservedAction.forEach(e=>{e(t)}),this.reservedAction.splice(0)}render(t){t.background(0),this.loadedScenes.forEach(e=>{t.push(),e.render(t),t.pop()})}reserveNextScene(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.reservedAction.push(s=>{t.init(s),e&&this.loadedScenes.splice(0),this.loadedScenes.push(t)})}onResized(t){this.loadedScenes.reverse().forEach(e=>{e.onResized(t)})}isTopScene(t){return this.loadedScenes[this.loadedScenes.length-1]===t}constructor(){this.loadedScenes=[],this.reservedAction=[]}}l.instance=new l;class a{update(t){if(t.frameCount-this.lastReloded>2){this.rects.splice(0);for(let e=0;e<20;e++){let s=[this.width,this.height,this.width/10,this.height/10,this.width,this.height,this.width/10,this.height/10];for(let i=0;i<s.length;i++)s[i]=t.random(s[i]);this.rects.push([{x:s[0],y:s[1],width:s[2],height:s[3]},{x:s[4],y:s[5],width:s[6],height:s[7]}])}this.lastReloded=t.frameCount}}draw(t){t.push(),t.noStroke(),this.rects.forEach(e=>{t.rect(e[1].x*t.width/this.width,e[1].y*t.height/this.height,e[1].width*t.width/this.width,e[1].y*t.height/this.height)}),t.pop()}constructor(){this.lastReloded=0,this.width=500,this.height=500,this.rects=[]}}var d=s(2232);class u{getPosition(){return{x:this.x,y:this.y}}getSize(){return this.size}setPosition(t,e){this.x=t,this.y=e}setSize(t){this.size=t}update(t){}render(t){t.push(),t.blendMode(t.ADD),t.fill(255,10),t.noStroke();for(let e=0;e<this.size;e+=this.size/20)t.circle(this.x,this.y,e);t.pop()}constructor(t,e,s){this.x=t,this.y=e,this.size=s}}class c{getPosition(){return{x:this.x,y:this.y}}getGravityAccel(){return this.gravityAccel}getSize(){return this.size}setPosition(t){this.x=t.x,this.y=t.y}setGravityAccel(t){this.gravityAccel=t}setMaxSpeedY(t){this.maxSpeedY=t}setSize(t){this.size=t}update(t){this.moveByKey(t);let e=t.deltaTime/1e3;this.speedY=t.min(this.speedY+e*this.getGravityAccel(),this.maxSpeedY);let s=this.y+e*this.speedY,i=p.getInstance().getAllCollision();this.canJump=!1,i.forEach(e=>{if(t.abs(e.getCenterX()-this.x)>(e.getWidth()+this.size)/2)return;let i=e.getCenterY()-e.getHeight()/2,h=this.y+this.getSize()/2*.8,r=s+this.getSize()/2;h<=i&&i<=r&&(s=i-this.getSize()/2,this.speedY=0,this.canJump=!0)}),this.y=s,this.collectLight(t)}collectLight(t){let e=p.getInstance().getAllLights().find(e=>2*t.abs(this.x-e.getPosition().x)<e.getSize()+this.getSize()&&2*t.abs(this.y-e.getPosition().y)<e.getSize()+this.getSize());void 0!=e&&(p.getInstance().decreaseDarkness(),p.getInstance().removeLight(e))}moveByKey(t){let e=t.deltaTime/1e3;o.getInstance().isLeftInputExists()&&(this.x-=80*e),o.getInstance().isRightInputExists()&&(this.x+=80*e),o.getInstance().isUpInputExists()&&this.canJump&&(this.speedY=-500,this.canJump=!1)}render(t){t.push(),t.stroke(0),t.fill(255),t.rectMode(t.CENTER),t.square(this.x,this.y,this.size),t.pop(),t.push(),t.noStroke(),t.fill(0),t.rect(this.x-this.size/3,this.y-this.size/3,this.size/6,2*this.size/3),t.rect(this.x+this.size/6,this.y-this.size/3,this.size/6,2*this.size/3),t.pop()}constructor(t,e,s){this.x=t,this.y=e,this.size=s,this.gravityAccel=0,this.speedY=0,this.maxSpeedY=0,this.canJump=!1}}class g{getPosition(){return{x:this.x,y:this.y}}getSpeed(){return this.speed}getLarge(){return{width:this.width,height:this.height}}setPosition(t,e){this.x=t,this.y=e}setLarge(t,e){this.width=t,this.height=e}setSpeed(t){this.speed=t}setColor(t,e,s,i){this.color={r:t,g:e,b:s,a:i}}getCenterX(){return this.x}getCenterY(){return this.y}getWidth(){return this.width}getHeight(){return this.height}getColor(){return this.color}update(t){let e=t.deltaTime/1e3;if(this.x+=e*this.speed,this.speed<0){let s=-(this.x-this.getLarge().width/2);s>0&&(this.x+=s,this.speed=-this.speed)}else{let i=this.x+this.getLarge().width/2-p.stageSize;i>0&&(this.x-=i,this.speed=-this.speed)}}render(t){t.push(),t.noStroke(),t.fill(this.color.r,this.color.g,this.color.b,this.color.a),t.rectMode(t.CENTER),t.rect(this.x,this.y,this.width,this.height),t.pop()}constructor(t,e,s,i,h){this.x=t,this.y=e,this.speed=s,this.width=i,this.height=h,this.color={r:255,g:255,b:255,a:255}}}class p{static getInstance(){return this.instance}init(t){let e=p.stageSize,s=e/5*4;this.player=new c(e/2,e/5*3,e/50*3),this.player.setGravityAccel(e),this.player.setMaxSpeedY(e/5*9),this.steps.splice(0),this.steps.push(new g(e/2,s,0,e,9)),this.lights.splice(0),this.lastStepCreateY=s,this.lastLightCreateY=s,this.createNewSteps(t),this.createNewLights(t),this.darkness=0,this.darkenSpeed=.1}update(t){this.isGameover()||this.player.update(t),this.steps.forEach(e=>{e.update(t)}),this.moveCamera(t),this.darkness+=t.deltaTime/1e3*this.darkenSpeed}moveCamera(t){let e=250-this.player.getPosition().y;e>0&&(this.player.setPosition({x:this.player.getPosition().x,y:this.player.getPosition().y+e}),this.steps.forEach(t=>{t.setPosition(t.getPosition().x,t.getPosition().y+e)}),this.lights.forEach(t=>{t.setPosition(t.getPosition().x,t.getPosition().y+e)}),this.steps=this.steps.filter(t=>t.getCenterY()-t.getHeight()/2<p.stageSize),this.lights=this.lights.filter(t=>t.getPosition().y-t.getSize()/2<p.stageSize),this.lastStepCreateY+=e,this.lastLightCreateY+=e,this.createNewSteps(t),this.createNewLights(t))}createNewSteps(t){for(let e=this.lastStepCreateY-p.stageSize/3;e>-p.stageSize;e-=p.stageSize/3){let s=.05*p.stageSize+t.random(.8*p.stageSize),i=t.random(p.stageSize/5),h=new g(s/2+t.random(p.stageSize-s),e,i,s,p.stageSize/50);this.steps.push(h),this.lastStepCreateY=e}this.steps.forEach(e=>{e.setColor(255,255,255,255-255*t.abs(p.stageSize/2-e.getCenterY())/(p.stageSize/2))})}createNewLights(t){for(let e=this.lastLightCreateY-p.stageSize/5;e>-p.stageSize;e-=p.stageSize/5){let s=t.random(p.stageSize),i=p.stageSize/40+t.random(p.stageSize/40),h=new u(s,e,i);this.lights.push(h),this.lastLightCreateY=e}}render(t){this.player.render(t),this.steps.forEach(e=>{e.render(t)}),this.lights.forEach(e=>{e.render(t)}),t.push(),t.background(0,300*this.darkness),t.pop()}getAllCollision(){return[...this.steps]}getAllLights(){return[...this.lights]}removeLight(t){this.lights=this.lights.filter(e=>e!=t)}decreaseDarkness(){let t=this.darkness-5*this.darkenSpeed;this.darkness=t<0?0:t}isGameover(){return this.player.getPosition().y>p.stageSize||this.darkness>1}constructor(){this.steps=[],this.lights=[]}}p.instance=new p,p.stageSize=500;var f=s(6098);class y extends f.Z{isInBounds(t,e){return this.x<t&&t<this.x+this.width&&this.y<e&&e<this.y+this.height}setRender(t){this.render=t}setGeometry(t,e,s,i){this.x=t,this.y=e,this.width=s,this.height=i}getGeometry(){return{x:this.x,y:this.y,width:this.width,height:this.height}}setStrokeColor(t){this.strokeColor=t}setFillColor(t){this.fillColor=t}draw(t){var e,s;t.push(),t.fill(null!==(e=this.fillColor)&&void 0!==e?e:t.color(0)),t.stroke(null!==(s=this.strokeColor)&&void 0!==s?s:t.color(0)),t.rect(this.x,this.y,this.width,this.height),t.pop(),t.push(),t.translate(this.x,this.y),this.render==this.render&&this.render(this,t),t.pop()}constructor(...t){super(...t),this.x=0,this.y=0,this.width=0,this.height=0,this.fillColor=null,this.strokeColor=null,this.render=null}}class m{init(t){this.onResized(t)}getComponents(){return[this.title,this.toTitleButton,this.retryButton]}update(t){this.getComponents().forEach(e=>{e.update(t)})}render(t){t.push(),t.fill(0,100),t.rect(0,0,t.width,t.height),t.pop(),this.getComponents().forEach(e=>{e.draw(t)})}onResized(t){this.title=new d.Z,this.title.setText("GameOver"),this.title.setFillColor(t.color(0,0)),this.title.setGeometry(0,0,t.width,t.height/2),this.title.setTextColor(255),this.retryButton=new y,this.retryButton.setStrokeColor(255);let e=t.min(t.width/5,t.height/6);this.retryButton.setGeometry((t.width-e)/2,t.height/2,e,e),this.retryButton.setRender((t,e)=>{let{x:s,y:i,width:h,height:r}=t.getGeometry();e.fill(255),e.noStroke(),e.arc(h/2,r/2,.8*h,.8*r,-e.PI/2,1.25*e.PI,e.PIE),e.fill(0),e.arc(h/2,r/2,.6*h,.6*r,-e.PI/2,1.25*e.PI,e.PIE),e.fill(255),e.triangle(h/2+.35*h*e.cos(1.3*e.PI),r/2+.35*r*e.sin(1.3*e.PI),h/2+.45*h*e.cos(1.2*e.PI),r/2+.45*r*e.sin(1.2*e.PI),h/2+.25*h*e.cos(1.2*e.PI),r/2+.25*r*e.sin(1.2*e.PI))}),this.retryButton.setOnClick(()=>{l.getInstance().reserveNextScene(new w)}),this.toTitleButton=new y,this.toTitleButton.setStrokeColor(255);let s=t.min(t.width/5,t.height/6);this.toTitleButton.setGeometry((t.width-s)/2,t.height/4*3,s,s),this.toTitleButton.setRender((t,e)=>{let{x:s,y:i,width:h,height:r}=t.getGeometry(),n=h/5,o=r/10;e.stroke(255),e.fill(0),e.rect(n,o,h-2*n,r-2*o),e.fill(255),e.quad(n,o,n,r-o,.6*h,1.1*r,.6*h,2*o+.1*r)}),this.toTitleButton.setOnClick(()=>{l.getInstance().reserveNextScene(new S)})}}class w{init(t){p.getInstance().init(t),this.onResized(t)}update(t){p.getInstance().update(t),p.getInstance().isGameover()&&l.getInstance().isTopScene(this)&&l.getInstance().reserveNextScene(new m,!1)}render(t){t.push(),t.stroke(255),t.fill(0),t.square(this.leftSideX,this.upSideY,this.stageRenderSize),t.pop(),t.push(),t.translate(this.leftSideX,this.upSideY),t.scale(this.stageRenderSize/p.stageSize),p.getInstance().render(t),t.pop()}onResized(t){this.stageRenderSize=t.min(.8*t.width,.8*t.height),this.leftSideX=(t.width-this.stageRenderSize)/2,this.upSideY=(t.height-this.stageRenderSize)/2}constructor(){this.leftSideX=0,this.upSideY=0,this.stageRenderSize=0}}class S{init(t){this.onResized(t)}getComponents(){return[this.title,this.startButton,this.noise]}update(t){this.getComponents().forEach(e=>{e.update(t)})}render(t){this.getComponents().forEach(e=>{e.draw(t)})}onResized(t){this.title=new d.Z,this.title.setText("Noise"),this.title.setGeometry(0,0,t.width,t.height/2),this.title.setTextColor(255),this.startButton=new y,this.startButton.setStrokeColor(255);let e=t.min(t.width/3,t.height/4);this.startButton.setGeometry(t.width/2-e/2,t.height/2,e,e),this.startButton.setRender((t,e)=>{let{x:s,y:i,width:h,height:r}=t.getGeometry(),n=h/5,o=r/5;e.noStroke(),e.fill(255),e.triangle(n,o,h-n,r/2,n,r-o)}),this.startButton.setOnClick(()=>{l.getInstance().reserveNextScene(new w)}),this.noise=new a}}function x(t){o.getInstance().init(t),t.setup=()=>{t.createCanvas(window.innerWidth,window.innerHeight),l.getInstance().reserveNextScene(new S)},t.draw=()=>{(window.innerWidth!=t.width||window.innerHeight!=t.height)&&(t.resizeCanvas(window.innerWidth,window.innerHeight),l.getInstance().onResized(t)),l.getInstance().update(t),l.getInstance().render(t)}}function C(){return(0,i.jsxs)("div",{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{children:"ノイズ"}),(0,i.jsx)("meta",{name:"description",content:"ノイズに飲まれるアクションゲーム！"}),(0,i.jsx)("link",{rel:"icon",href:"/NextApp/favicon.ico"})]}),(0,i.jsx)(n.default,{sketch:x})]})}},5152:function(t,e,s){t.exports=s(7645)},9008:function(t,e,s){t.exports=s(3121)}},function(t){t.O(0,[774,888,179],function(){return t(t.s=6851)}),_N_E=t.O()}]);