(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[356],{1092:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(7876),a=n(2244),i=n(8921),o=n(510),s=n(9281),l=n(3690),d=n(4024),c=n(352),m=n(4232),h=n(5348),u=n(9648),p=n(1428),f=n(4527);let x=[{category:"トップページ",pages:[{name:"トップページ",link:"/"}]},{category:"ゲーム",pages:[{name:"リバーシ",link:"/games/reversi"},{name:"弾幕集",link:"/games/bullet-hell"}]},{category:"p5.js",pages:[{name:"トップページ",link:"/p5sketches"},{name:"ライフゲーム",link:"/p5sketches/lifegame"},{name:"ラングトンの蟻",link:"/p5sketches/langtonant"},{name:"せれぶれいと",link:"/p5sketches/celebrate"}]},{category:"ツール",pages:[{name:"カラデシュ言語エディター",link:"/utils/kaladesh-lang"},{name:"計算機変換",link:"/utils/computation-system"},{name:"ただの電卓",link:"/utils/calculator"}]},{category:"ガラクタ",pages:[{name:"言語集",link:"/words"}]},{category:"外部サイト",pages:[{name:"Twitter",link:"https://x.com/SnowEsamosc",external:!0},{name:"GitHub",link:"https://github.com/Snowman-s",external:!0},{name:"Qiita",link:"https://qiita.com/Snowman-s",external:!0},{name:"Note",link:"https://note.com/snowesamosc",external:!0},{name:"Booth",link:"https://snowman-s.booth.pm/",external:!0}]}];function g(e){var t;let[n,g]=(0,m.useState)(!1),b=(0,r.jsx)(o.A,{children:x.map((e,t)=>(0,r.jsxs)(m.Fragment,{children:[(0,r.jsx)(s.Ay,{children:(0,r.jsx)(l.A,{primary:e.category,primaryTypographyProps:{fontWeight:"bold"}})}),e.pages.map(e=>(0,r.jsx)(s.Ay,{disablePadding:!0,children:(0,r.jsxs)(d.A,{component:"a",href:e.link,onClick:()=>g(!1),children:[e.external?(0,r.jsx)(a.A,{}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(l.A,{primary:e.name})]})},e.link)),t<x.length-1&&(0,r.jsx)(s.Ay,{})]},e.category))});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{position:e.noScroll?"static":"sticky",style:null!=(t=e.style)?t:{},color:"primary",children:(0,r.jsxs)(u.A,{children:[(0,r.jsx)(p.A,{variant:"h6",color:"inherit",noWrap:!0,children:"SnowEsamoscのページ"}),(0,r.jsx)("div",{style:{marginLeft:"auto"},children:(0,r.jsx)(f.A,{onClick:()=>g(!0),children:(0,r.jsx)(i.A,{style:{color:"#dddddd"}})})})]})}),(0,r.jsx)(c.Ay,{anchor:"right",open:n,onClose:()=>g(!1),PaperProps:{style:{position:"absolute",top:0,right:0,height:"100%",width:250}},children:b})]})}},2761:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var r=n(7876),a=n(7328),i=n.n(a),o=n(4232),s=n(9107),l=n.n(s),d=n(8);let c={Push:"Push",Dup:"Dup",Copy:"Copy",Swap:"Swap",Discard:"Discard",Slide:"Slide",Add:"Add",Subtract:"Subtract",Multiply:"Multiply",Divide:"Divide",Modulo:"Modulo",KaladeshArithmetic:"KaladeshArithmetic",Store:"Store",Retrieve:"Retrieve",Label:"Label",Call:"Call",Jump:"Jump",JumpIfZero:"JumpIfZero",JumpIfNegative:"JumpIfNegative",Return:"Return",End:"End",OutputCharacter:"OutputCharacter",OutputNumber:"OutputNumber",ReadCharacter:"ReadCharacter",ReadNumber:"ReadNumber"},m=[c.Push,c.Copy,c.Slide],h=[c.Label,c.Call,c.Jump,c.JumpIfNegative,c.JumpIfZero];function u(e){return void 0!=h.find(t=>t==e)}class p{parse(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.lexical(e,[t,n,r],a);if(!a){let e=i.map((e,t)=>({error:{msg:'"'.concat(e.where,'" is invalid token'),tokenIndex:t},token:e})).filter(e=>e.token.error).map(e=>e.error);if(e.length>0)return e}let o=i.map(e=>e.where),s=this.transcript(o,t,n,r);return this.syntactic(s)}lexical(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],a="",i="",o=e=>{n&&e.error||r.push(e)};e:for(let n of e){if(n.match(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g)){""!=(i+=a)&&o({error:!0,where:i}),i=a="";continue}let e=a;for(let e of(a+=n,t))if(e==a){""!=i&&o({error:!0,where:i}),i="",o({error:!1,where:a}),a="";continue e}else if(a==e.slice(0,a.length))continue e;for(let r of t)if(r[0]==n){i+=e,a=n;continue e}i+=a,a=""}return""!=(i+=a)&&o({error:!0,where:i}),r}transcript(e,t,n,r){return e.map(e=>{switch(e){case t:return"ws";case n:return"tab";case r:return"lf";default:throw Error()}})}syntactic(e){let t=()=>{let t=e.shift();if(void 0==t)throw new f;return t},n=[],r=[],a=[];try{for(;e.length>0;){let e,i=this.findIMP(t);switch(i){case"Stack":e=this.findStackCommand(t);break;case"Arith":e=this.findArithCommand(t);break;case"Flow":e=this.findFlowCommand(t);break;case"Heap":e=this.findHeapCommand(t);break;case"IO":e=this.findIOCommand(t);break;default:throw Error("Unknown IMP type: ".concat(i,". This should never happen."))}"msg"in e?(n.push(null),a.push(Object.assign(e,{commandIndex:n.length-1}))):(n.push(e),"Label"==e.command&&r.push({label:e.param,commandIndex:n.length-1}))}}catch(e){if(e instanceof f)return{error:[{msg:"Unexpected EOF",commandIndex:n.length}],out:n}}{let e=[];r.forEach(t=>{-1!=e.indexOf(t.label)?a.push({msg:'Label "'.concat(t.label,'" is already exsist.'),commandIndex:t.commandIndex}):e.push(t.label)})}return(n.forEach((e,t)=>{void 0!=e&&u(e.command)&&-1==r.map(e=>e.label).findIndex(t=>t==e.param)&&a.push({msg:'Label "'.concat(e.param,'" is not defined'),commandIndex:t})}),a.length>0)?{error:a.sort((e,t)=>e.commandIndex-t.commandIndex),out:n}:{commands:n,labels:r}}findIMP(e){let t=e();if("ws"==t)return"Stack";if("tab"!=t)return"Flow";{let t=e();return"ws"==t?"Arith":"tab"==t?"Heap":"IO"}}findStackCommand(e){return this.findCommandAndParam(e,[{t:["ws"],cmd:c.Push},{t:["lf","ws"],cmd:c.Dup},{t:["tab","ws"],cmd:c.Copy},{t:["lf","tab"],cmd:c.Swap},{t:["lf","lf"],cmd:c.Discard},{t:["tab","lf"],cmd:c.Slide}])}findArithCommand(e){return this.findCommandAndParam(e,[{t:["ws","ws"],cmd:c.Add},{t:["ws","tab"],cmd:c.Subtract},{t:["ws","lf"],cmd:c.Multiply},{t:["tab","ws"],cmd:c.Divide},{t:["tab","tab"],cmd:c.Modulo},{t:["lf"],cmd:c.KaladeshArithmetic}])}findHeapCommand(e){return this.findCommandAndParam(e,[{t:["ws"],cmd:c.Store},{t:["tab"],cmd:c.Retrieve}])}findFlowCommand(e){return this.findCommandAndParam(e,[{t:["ws","ws"],cmd:c.Label},{t:["ws","tab"],cmd:c.Call},{t:["ws","lf"],cmd:c.Jump},{t:["tab","ws"],cmd:c.JumpIfZero},{t:["tab","tab"],cmd:c.JumpIfNegative},{t:["tab","lf"],cmd:c.Return},{t:["lf","lf"],cmd:c.End}])}findIOCommand(e){return this.findCommandAndParam(e,[{t:["ws","ws"],cmd:c.OutputCharacter},{t:["ws","tab"],cmd:c.OutputNumber},{t:["tab","ws"],cmd:c.ReadCharacter},{t:["tab","tab"],cmd:c.ReadNumber}])}findCommandAndParam(e,t){let n=this.findCommand(e,t);if(n instanceof x)return n;if(void 0!=m.find(e=>e==n)){let t=this.findNumber(e);return t instanceof x?t:{command:n,param:t}}if(!u(n))return{command:n};{let t=this.findLabel(e);return t instanceof x?t:{command:n,param:t}}}findCommand(e,t){let n=[];n.push(e());let r=()=>t.find(e=>{let t=e.t;return void 0==n.find((e,n)=>t[n]!=e)}),a=r(),i=()=>t.find(e=>{let t=e.t;return t.length==n.length&&void 0==t.find((e,t)=>n[t]!=e)}),o=i();for(;void 0==o&&void 0!=a;)n.push(e()),a=r(),o=i();return void 0==o?g("There are no commands match to this pattern"):o.cmd}findNumber(e){let t=e();if("lf"==t)return g("Unexpected end of number");let n="ws"==t?1:-1;if("lf"==(t=e()))return g("Unexpected end of number");let r=[];for(r.push(+("ws"!=t));"lf"!=(t=e());)r.push(+("ws"!=t));return n*r.map((e,t)=>e<<r.length-1-t).reduce((e,t)=>e+t)}findLabel(e){let t=e(),n="";if("lf"==t)return g("Unexpected end of label");for(n+="ws"==t?"W":"tab"==t?"T":"L";"lf"!=(t=e());)n+="ws"==t?"W":"tab"==t?"T":"L";return n}}class f extends Error{constructor(){super()}}class x{constructor(e){this.msg=e}}function g(e){return new x(e)}class b{exec(e,t){let n=e.commands,r=e.labels,a=0,i=[],o=e=>{m(e),i.push(e)},s=()=>{if(0==i.length)throw Error("Attempt to pop from empty stack");return i.pop()},l=e=>{if(i.length<=e)throw Error("Index ".concat(e," element is not exsist on stack"));return i[e]},d=e=>{if(i.length<=e)throw Error("Index ".concat(e," element is not exsist on stack"));return i.splice(e,1)},c=new Map,m=e=>{if(!Number.isSafeInteger(e))throw Error("Integer overflowed")},h=e=>(m(e),c.has(e)?c[e]:0),u=(e,t)=>c.set(e,t),p=[],f=e=>{p.push(e)},x=()=>{if(0==p.length)throw Error("Attempt to end a subroutine in non-subrotine");return p.pop()};try{for(;n.length>a;){let e=n[a];switch(console.log(e.command),e.command){case"Push":o(e.param),a++;break;case"Dup":let i=s();o(i),o(i),a++;break;case"Copy":o(l(e.param)),a++;break;case"Swap":{let e=s(),t=s();o(e),o(t)}a++;break;case"Discard":s(),a++;break;case"Slide":d(e.param),a++;break;case"Add":{let e=s(),t=s();o(e+t)}a++;break;case"Subtract":{let e=s(),t=s();o(t-e)}a++;break;case"Multiply":{let e=s(),t=s();o(e*t)}a++;break;case"Divide":{let e=s(),t=s();o(Math.trunc(t/e))}a++;break;case"Modulo":{let e=s(),t=s();o(t%e)}a++;break;case"KaladeshArithmetic":throw Error("あなたのコンピューターは処理に耐えられませんでした。社長がお呼びです。");case"Store":{let e=s(),t=s();u(t,e)}a++;break;case"Retrieve":{let e=s();o(h(e))}a++;break;case"Label":case"ReadCharacter":case"ReadNumber":a++;break;case"Call":{f(a+1);let t=e.param,n=r.find(e=>e.label==t).commandIndex;if(void 0==n)throw Error("Cannot find label ".concat(t));a=n}break;case"Jump":{let t=e.param,n=r.find(e=>e.label==t).commandIndex;if(void 0==n)throw Error("Cannot find label ".concat(t));a=n}break;case"JumpIfZero":{let t=s();if(0==t){let t=e.param,n=r.find(e=>e.label==t).commandIndex;if(void 0==n)throw Error("Cannot find label ".concat(t));a=n}else a++}break;case"JumpIfNegative":if(0>s()){let t=e.param,n=r.find(e=>e.label==t).commandIndex;if(void 0==n)throw Error("Cannot find label ".concat(t));a=n}else a++;break;case"Return":a=x();break;case"End":return;case"OutputCharacter":t(String.fromCodePoint(s())),a++;break;case"OutputNumber":t(s().toString()),a++}}}catch(e){e instanceof Error&&t("Error at index".concat(a," command: ").concat(e.message))}}}var w=n(5444),k=n(5078),v=n(2643),y=n(6865),A=n(951),j=n(1054),C=n(6520),S=n(4527),I=n(8532),E=n(1092);let N={kaladesh:{tab:"カラデシュ!"},avishkar:{tab:"アヴィシュカー!"}};function P(){let[e,t]=o.useState("カラデシュ!\nすごい!\n本当にすごいんだ!"),[n,a]=o.useState("kaladesh"),[s,c]=o.useState(),[m,h]=o.useState(),[u,f]=o.useState();d.languages.kaladesh={ws:/すごい\!/,tab:/カラデシュ\!/,lf:/本当にすごいんだ\!/},d.languages.avishkar={ws:/すごい\!/,tab:/アヴィシュカー\!/,lf:/本当にすごいんだ\!/};let x=e=>{e in N&&(t(t=>t.replaceAll(N[n].tab,N[e].tab)),a(e),h(void 0),f(void 0))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"カラデシュ言語エディター"}),(0,r.jsx)("meta",{name:"description",content:"カラデシュ言語すごい!本当にすごいんだ!"}),(0,r.jsx)("link",{rel:"icon",href:"/NextApp/favicon.ico"}),(0,r.jsx)("style",{children:"\n      .token.ws {\n        color: cornflowerblue;\n      }\n      .token.tab {\n        color: #DD4A68;\n      }\n      .token.lf {\n        color: coral;\n      }\n    "})]}),(0,r.jsxs)("div",{style:{minWidth:"600px",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",boxSizing:"border-box",overflowY:"hidden",overflowX:"hidden"},children:[(0,r.jsx)(E.A,{noScroll:!0}),(0,r.jsxs)(w.A,{direction:"column",spacing:2,flexGrow:1,minHeight:0,height:"100%",padding:"10px",boxSizing:"border-box",children:[(0,r.jsxs)(w.A,{direction:"row",spacing:2,alignItems:"center",style:{padding:10,boxSizing:"border-box"},children:[(0,r.jsx)("h1",{children:"カラデシュ言語エディター"}),(0,r.jsx)(k.A,{href:"./help",target:"_blank",children:(0,r.jsx)(v.A,{variant:"contained",children:"Help"})}),(0,r.jsxs)(y.A,{value:n,onChange:e=>x(e.target.value),children:[(0,r.jsx)(A.A,{value:"kaladesh",children:"カラデシュモード"}),(0,r.jsx)(A.A,{value:"avishkar",children:"アヴィシュカーモード"})]})]}),(0,r.jsx)("hr",{style:{margin:0}}),(0,r.jsxs)(w.A,{direction:"row",spacing:2,justifyContent:"space-evenly",alignItems:"stretch",flex:1,minHeight:0,style:{height:"100%",boxSizing:"border-box"},children:[(0,r.jsx)(j.A,{sx:{flex:5,height:"100%"},style:{whiteSpace:"pre",padding:"10px",boxSizing:"border-box",minWidth:0},children:(0,r.jsxs)(w.A,{direction:"column",spacing:2,style:{width:"100%",height:"100%"},children:[(0,r.jsx)("h3",{children:"コード"}),(0,r.jsx)("hr",{style:{marginRight:"10px"}}),(0,r.jsx)("div",{style:{flexGrow:1,width:"100%",height:"100%",overflow:"scroll",margin:0},children:(0,r.jsx)(l(),{value:e,onValueChange:e=>t(e),highlight:e=>(0,d.highlight)(e,"avishkar"===n?d.languages.avishkar:d.languages.kaladesh,n),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,fontWeight:"bold",border:"1px solid #ddd",minHeight:"100%",boxSizing:"border-box"}})})]})}),(0,r.jsx)(C.A,{sx:{flex:1,width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(S.A,{onClick:()=>{let t=new p().parse(e,"すごい!",N[n].tab,"本当にすごいんだ!",!0);c(t),void 0==t?h(""):h(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kaladesh",n=e=>"avishkar"===t&&"KaladeshArithmetic"===e?"AvishkarArithmetic":e;if("commands"in e)return e.commands.map(e=>"  ".concat(n(e.command)," ").concat("param"in e?e.param.toString():"","\n")).reduce((e,t)=>e+t,"");if(!("error"in e))return e.map(e=>"Syntax Error:".concat(e.msg," Token Index=").concat(e.tokenIndex,"\n")).reduce((e,t)=>e+t,"");{let t=e.error.map(e=>"Syntax Error: ".concat(e.msg,", Command Index=").concat(e.commandIndex,"\n")).reduce((e,t)=>e+t,"");return e.out.length>0&&(t+="\n・Commands to refer\n",t+=e.out.map((e,t)=>t.toString()+": "+(void 0==e?"???\n":"".concat(e.command," ").concat("param"in e?e.param.toString():"","\n"))).reduce((e,t)=>e+t,"")),t}}(t,n))},children:(0,r.jsx)(I.A,{})})}),(0,r.jsx)(j.A,{sx:{flex:3,height:"100%"},style:{whiteSpace:"pre",padding:"10px",boxSizing:"border-box",minWidth:0},children:(0,r.jsxs)(w.A,{direction:"column",spacing:2,style:{width:"100%",height:"100%"},children:[(0,r.jsx)("h3",{children:"コンパイル結果"}),(0,r.jsx)("hr",{style:{marginRight:"15px"}}),(0,r.jsx)("div",{style:{width:"100%",height:"auto",overflow:"auto",margin:0,flexGrow:1},children:(0,r.jsx)("pre",{children:m})})]})}),(0,r.jsx)(C.A,{sx:{flex:1,width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(S.A,{onClick:()=>{if(void 0==s||Array.isArray(s)||"error"in s)return void f("");let e=new b,t="";e.exec(s,e=>t+=e),f(t)},children:(0,r.jsx)(I.A,{})})}),(0,r.jsx)(j.A,{sx:{flex:3,height:"100%"},style:{whiteSpace:"pre",padding:"10px",boxSizing:"border-box",minWidth:0},children:(0,r.jsxs)(w.A,{direction:"column",spacing:2,style:{width:"100%",height:"100%"},children:[(0,r.jsx)("h3",{children:"実行結果"}),(0,r.jsx)("hr",{style:{marginRight:"15px"}}),(0,r.jsx)("div",{style:{width:"100%",height:"auto",overflow:"auto",margin:0,flexGrow:1},children:(0,r.jsx)("pre",{children:u})})]})})]})]})]})]})}},7801:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/utils/kaladesh-lang",function(){return n(2761)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[956,276,810,93,60,636,593,792],()=>t(7801)),_N_E=e.O()}]);